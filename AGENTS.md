# AIエージェント設定

このファイルは、このリポジトリ内で作業するAIエージェントのための設定と指示を概説するものです。コードの品質、スタイル、ワークフローの一貫性を確保するための中心的なガイドとして機能します。

## 基本原則 (Core Mandates)

このコードベースを操作するすべてのエージェントは、以下の義務を遵守しなければなりません：

1.  **コードフォーマット**:
    -   コードを変更した後は必ず `cargo fmt` を実行し、Rustの標準フォーマットを適用すること。
    -   プロジェクトの既存のスタイルとの一貫性を保つこと。
    - dead_codeは最終的にはなるべく消すようにしてください

2.  **Lintと品質保証**:
    -   タスクを完了とする前に必ず `cargo clippy` を実行し、警告が出ない状態にすること。
    -   Lintのエラーや警告には積極的に対処すること。
    -   Rustらしい（idiomaticな）コードパターンを優先すること。

3.  **テスト**:
    -   既存および新規のすべてのテストについて `cargo nextest run` がパスすることを確認すること。
    -   可能な限り、新機能やバグ修正に対するユニットテストを追加すること。

## ワークフロー

1.  **分析 (Analyze)**: タスクと影響を受けるコードを理解する。
2.  **計画 (Plan)**: 実装戦略を策定する。
3.  **実装 (Implement)**: コードを記述する。
4.  **フォーマット (Format)**: `cargo fmt` を実行する。
5.  **Lint (Lint)**: `cargo clippy` を実行し、問題を修正する。
6.  **検証 (Verify)**: `cargo nextest run` を実行し、必要に応じて手動検証を行う。
7.  **再確認**: 検証結果などをもとに修正をした場合には再度4以降を実行してfmtやclippyのエラーがでないようにする
8.  **ドキュメントの修正**: 変更した内容をもとにドキュメントと矛盾や古くなった記述があった場合には更新する

## 個別の指示

-   **依存関係**: ユーザーの明示的な承認や、明確に説明されたやむを得ない必要性がない限り、新しい依存関係を追加しないこと。
-   **コメント**: コードが「何」をしているか（変数名や構造から自明であるべきこと）ではなく、複雑なロジックが存在する「理由」を説明するコメントを追加すること。

---
*このファイルは、AIエージェントがプロジェクト固有の要件を理解するためのものです。*
